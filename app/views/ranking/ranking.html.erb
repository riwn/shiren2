<div class="container">
    <h1>Ranking</h1>
    <%= button_to("申請","/ranking/newrecord",method: :get) %>
    <table border="1">
        <tr>
            <td>名前</td>
            <td>ダンジョン</td>
            <td>記録</td>
            <td>URL</td>
            <td>達成日</td>
            <td>申請日</td>
            <td>画像</td>
            
        </tr>
        <% @ranks.each do |rank| %>
        <% if rank.permission != nil %>
        <tr>
            <td><%= rank.name %></td>
            <td><%= rank.dungeon %></td>
            <td><%= 
                if rank.result >= 3600 then
                    (rank.result.div(3600).to_s + "時間" + ((rank.result.modulo(3600)).div(60)).to_s + "分" + ((rank.result.modulo(3600)).modulo(60)).to_s + "秒")
                else
                    ((rank.result.div(60)).to_s + "分" + (rank.result.modulo(60)).to_s + "秒")
                end
            %></td>
            <td><%= link_to "動画", rank.movie %></td>
            <td><%= rank.resultdate.year %>/<%= rank.resultdate.month %>/<%= rank.resultdate.day %></td>
            <td><%= rank.created_at.year %>/<%= rank.created_at.month %>/<%= rank.created_at.day %></td>      
            <td><%=             
            if rank.recordimage.file.nil? then
                "なし"
            else
                image_tag rank.recordimage.url
            end %></td>
        </tr>
        <% end %>
    <% end %>
    </table>
</div>
